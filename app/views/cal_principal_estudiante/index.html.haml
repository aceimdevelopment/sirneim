- @cal_usuario = session[:cal_usuario]

-if (@cal_usuario.correo_electronico.blank? or @cal_usuario.telefono_movil.blank? or @cal_usuario.telefono_habitacion.blank?)

	= render :partial => 'cal_usuario/datos_modal'


- if @estudiante.idioma1_id.nil? and @estudiante.idioma2_id.nil?
	.modal.fade#actualizar_idiomas{'aria-labelledby' => "myModalLabel", 'aria-hidden'=> false}
		.modal-dialog
			.modal-content
				.alert.alert-info
					%h4 IMPORTANTE:
					Por favor indique el par de idiomas correspondientes a su carrera. Esta Información será usada para brindarle una mejor experiencia con el sistema.
				
		.modal-header
			#myModalLabel 
				%h3 Actualizar Idiomas
		.modal-body

			=form_tag ({:action => 'actualizar_idiomas'}, :class => "form-horizontal")  do 
				= collection_select :cal_estudiante, :idioma1_id, @idiomas1, :id, :descripcion, {:prompt => true}, { :class => 'input', :onchange => "ver_select(this.value)", :required => true }


				= collection_select :cal_estudiante, :idioma2_id, @idiomas2, :id, :descripcion, {:prompt => true}, { :class => 'input', :style => 'display:none;', :id => 'idioma2', :onchange => "$('#actualizar_btn').show();", :required => true}

				=submit_tag 'Actualizar', :class => "btn btn-primary", :id => 'actualizar_btn', :style => 'display:none;'

	:javascript

		function ver_select(val){
			$("#idioma2 option[value="+val+"]").remove();
			$('#idioma2').show();

			if (val == ''){
			$('#idioma2').hide();
			$('#actualizar_btn').hide();
			
			}

			if (val == 'ING'){
				$("#idioma2").append('<option value="FRA">Fancés</option>');
							
			}

		}

		$(document).ready(function() {
			$("#actualizar_idiomas").modal();
		});

- else
	%h3 Historial Academico:
	.accordion#acordion1
		.accordion-group
			.accordion-heading
				= link_to "Horario #{@periodo_actual.id}", "#collapse#{@periodo_actual.id}" , {:class => "accordion-toggle", "data-toggle" => "collapse", "data-parent" => "#acordion1"}
			.accordion-body.collapse.in{:id => "collapse#{@periodo_actual.id}"}
				.accordion-inner
					%ul
						- @archivos.each do |archivo|
							%li= link_to archivo, :controller => 'cal_descargar', :action => 'horario', :id => archivo


		- @periodos.each do |periodo|
			- @secciones_periodo = @secciones.where(:cal_semestre_id => periodo.id)
			- if true 
				.accordion-group
					.accordion-heading
						= link_to "Período Académico #{periodo.id}", "#collapse#{periodo.id}", {:class => "accordion-toggle", "data-toggle" => "collapse", "data-parent" => "accordion1"}
					.accordion-body.collapse.in{:id => "collapse#{periodo.id}"}
						.accordion-inner
							%table.table.table-bordered.table-striped.table-condensed
								%thead
									%tr
										%th Año
										%th Asignatura
										%th Sección
										%th Trimestre I
										%th Trimestre II
										%th Trimestre III
										%th Definitiva
								- @secciones_periodo.each do |est_sec_per|
									- tipo_calificacion = ''
									- tipo_calificacion = 'success' if est_sec_per.cal_tipo_estado_calificacion_id.eql? 'AP'
									- tipo_calificacion = 'error' if (est_sec_per.cal_tipo_estado_calificacion_id.eql? 'RE' or est_sec_per.cal_tipo_estado_calificacion_id.eql? 'PI') 	

									%tbody
										%tr{:class => tipo_calificacion}
											%td= est_sec_per.cal_seccion.cal_materia.anno
											%td= est_sec_per.cal_seccion.cal_materia.descripcion
											%td= est_sec_per.cal_seccion.numero
											%td= est_sec_per.calificacion_primera
											%td= est_sec_per.calificacion_segunda
											%td= est_sec_per.calificacion_tercera
											%td= est_sec_per.calificacion_final





:javascript

	$(document).ready(function() {
		$(".collapse").collapse();
	});
	

