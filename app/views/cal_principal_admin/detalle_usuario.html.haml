%h3= link_to "<< Regresar", :back, {class: 'btn'}

.well.well-small
	%h3 
		Datos Personales y de Contacto: 
	
		= link_to "Actualizar", {controller: 'cal_usuario', action: 'editar', ci: @usuario.ci,  controlador: controller_name, accion: action_name}, class: 'btn'
	%h5 Datos Personales: 
	%ul
		%li
			%b Cédula de Identidad:
			= @usuario.ci
		%li
			%b Nombre:	
			= @usuario.nombre_completo
		- if @admin and @admin.super_admin?
			%li
				%b Contraseña:
				= @usuario.contrasena
	%hr

	%h5 Datos de contacto:
	%ul
		%li 
			%b Correo Electrónico:
			= "#{@usuario.correo_electronico}" 
		%li 
			%b Teléfono Móvil:
			= "#{@usuario.telefono_movil}"
		%li 
			%b Teléfono Habitación:
			= "#{@usuario.telefono_habitacion}"

- @accion = action_name
- @controlador = controller_name
- if @estudiante
	.well.well-small
		%h3 Plan de Estudio y Combinación de Idiomas:
		


		%table.table.table-bordered.table-striped.table-condensed
			%td
				
				- if @admin and @admin.super_admin? and @estudiante.planes.count < 3
					%b.tooltip-btn{'data_toggle'=>'tooltip', 'title'=>'Agregar Nuevo Plan de Estudio'}
						= link_to('javascript:void(0)', { class: 'btn btn-success btn-mini', :onclick => "return $('#nuevo_plan_semestre').modal();", 'data_toggle' => 'modal' }) do
							= content_tag(:i, "", class: "icon-plus icon-white")

					.modal.hide.fade#nuevo_plan_semestre{'aria-hidden'=> false}
						- @hp = CalEstudianteTipoPlan.new
						- @hp.cal_estudiante_ci = @estudiante.id
						= render 'cal_estudiante_tipo_plan/form'
				%b 
					Planes:
				- @estudiante.historiales_planes.each do |hp| 
					= hp.descripcion

					- if @admin and @admin.super_admin?
			
						%b.tooltip-btn{'data_toggle'=>'tooltip', 'title'=>'Editar'}
							= link_to('javascript:void(0)', {onclick: "return $('##{hp.tipo_plan_id}_semestre').modal();", 'data_toggle' => 'modal'}) do
								= content_tag(:i, "", class: "icon-edit")

						.modal.hide.fade{tabindex: "-1", role: "dialog", 'aria-labelledby' => "myModalLabel", 'aria-hidden'=> false, id: "#{hp.tipo_plan_id}_semestre"}
							- @hp = hp
							= render 'cal_estudiante_tipo_plan/form'
					|

		%table.table.table-bordered.table-striped.table-condensed
			%td
				%b Idiomas:
				= "#{@estudiante.idioma1.descripcion}" if @estudiante.idioma1 
				= "- #{@estudiante.idioma2.descripcion}" if @estudiante.idioma2 
				%b.tooltip-btn{'data_toggle'=>'tooltip', 'title'=>'Editar Idiomas'}		
					= link_to("#", { class: 'btn btn-success btn-mini', :onclick => "return $('#actualizar_idiomas').modal();", 'data_toggle' => 'modal' }) do
						= content_tag(:i, "", class: "icon-edit icon-white")

	.well.well-small
		= render partial: 'cal_estudiante/historial_academico'

	= render partial: 'cal_estudiante/actualizar_idiomas'

- if @profesor
	.well.well-small
		%h3 Departamento:
		= @profesor.cal_departamento.descripcion

	- @secciones = @profesor.cal_secciones
	- if @secciones.count > 0
		.well.well-small
			%h3= "Secciones (#{@secciones.count}):"
			- @secciones.each do |s| 
				%p= link_to_if (@admin and @admin.super_admin?), s.descripcion, "cal_principal_admin/ver_seccion_admin?id=#{s.id}"

:javascript

	$(document).ready(function() {
		$('.tooltip-btn').tooltip();
	});